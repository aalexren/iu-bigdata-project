\c project;

CREATE TABLE IF NOT EXISTS application_data (
    SK_ID_CURR BIGINT UNIQUE,
    TARGET BIGINT,
    NAME_CONTRACT_TYPE TEXT,
    CODE_GENDER TEXT,
    FLAG_OWN_CAR TEXT,
    FLAG_OWN_REALTY TEXT,
    CNT_CHILDREN BIGINT,
    AMT_INCOME_TOTAL DOUBLE PRECISION,
    AMT_CREDIT DOUBLE PRECISION,
    AMT_ANNUITY DOUBLE PRECISION,
    AMT_GOODS_PRICE DOUBLE PRECISION,
    NAME_TYPE_SUITE TEXT,
    NAME_INCOME_TYPE TEXT,
    NAME_EDUCATION_TYPE TEXT,
    NAME_FAMILY_STATUS TEXT,
    NAME_HOUSING_TYPE TEXT,
    REGION_POPULATION_RELATIVE DOUBLE PRECISION,
    DAYS_BIRTH BIGINT,
    DAYS_EMPLOYED BIGINT,
    DAYS_REGISTRATION DOUBLE PRECISION,
    DAYS_ID_PUBLISH BIGINT,
    OWN_CAR_AGE DOUBLE PRECISION,
    FLAG_MOBIL BIGINT,
    FLAG_EMP_PHONE BIGINT,
    FLAG_WORK_PHONE BIGINT,
    FLAG_CONT_MOBILE BIGINT,
    FLAG_PHONE BIGINT,
    FLAG_EMAIL BIGINT,
    OCCUPATION_TYPE TEXT,
    CNT_FAM_MEMBERS DOUBLE PRECISION,
    REGION_RATING_CLIENT BIGINT,
    REGION_RATING_CLIENT_W_CITY BIGINT,
    WEEKDAY_APPR_PROCESS_START TEXT,
    HOUR_APPR_PROCESS_START BIGINT,
    REG_REGION_NOT_LIVE_REGION BIGINT,
    REG_REGION_NOT_WORK_REGION BIGINT,
    LIVE_REGION_NOT_WORK_REGION BIGINT,
    REG_CITY_NOT_LIVE_CITY BIGINT,
    REG_CITY_NOT_WORK_CITY BIGINT,
    LIVE_CITY_NOT_WORK_CITY BIGINT,
    ORGANIZATION_TYPE TEXT,
    EXT_SOURCE_1 DOUBLE PRECISION,
    EXT_SOURCE_2 DOUBLE PRECISION,
    EXT_SOURCE_3 DOUBLE PRECISION,
    APARTMENTS_AVG DOUBLE PRECISION,
    BASEMENTAREA_AVG DOUBLE PRECISION,
    YEARS_BEGINEXPLUATATION_AVG DOUBLE PRECISION,
    YEARS_BUILD_AVG DOUBLE PRECISION,
    COMMONAREA_AVG DOUBLE PRECISION,
    ELEVATORS_AVG DOUBLE PRECISION,
    ENTRANCES_AVG DOUBLE PRECISION,
    FLOORSMAX_AVG DOUBLE PRECISION,
    FLOORSMIN_AVG DOUBLE PRECISION,
    LANDAREA_AVG DOUBLE PRECISION,
    LIVINGAPARTMENTS_AVG DOUBLE PRECISION,
    LIVINGAREA_AVG DOUBLE PRECISION,
    NONLIVINGAPARTMENTS_AVG DOUBLE PRECISION,
    NONLIVINGAREA_AVG DOUBLE PRECISION,
    APARTMENTS_MODE DOUBLE PRECISION,
    BASEMENTAREA_MODE DOUBLE PRECISION,
    YEARS_BEGINEXPLUATATION_MODE DOUBLE PRECISION,
    YEARS_BUILD_MODE DOUBLE PRECISION,
    COMMONAREA_MODE DOUBLE PRECISION,
    ELEVATORS_MODE DOUBLE PRECISION,
    ENTRANCES_MODE DOUBLE PRECISION,
    FLOORSMAX_MODE DOUBLE PRECISION,
    FLOORSMIN_MODE DOUBLE PRECISION,
    LANDAREA_MODE DOUBLE PRECISION,
    LIVINGAPARTMENTS_MODE DOUBLE PRECISION,
    LIVINGAREA_MODE DOUBLE PRECISION,
    NONLIVINGAPARTMENTS_MODE DOUBLE PRECISION,
    NONLIVINGAREA_MODE DOUBLE PRECISION,
    APARTMENTS_MEDI DOUBLE PRECISION,
    BASEMENTAREA_MEDI DOUBLE PRECISION,
    YEARS_BEGINEXPLUATATION_MEDI DOUBLE PRECISION,
    YEARS_BUILD_MEDI DOUBLE PRECISION,
    COMMONAREA_MEDI DOUBLE PRECISION,
    ELEVATORS_MEDI DOUBLE PRECISION,
    ENTRANCES_MEDI DOUBLE PRECISION,
    FLOORSMAX_MEDI DOUBLE PRECISION,
    FLOORSMIN_MEDI DOUBLE PRECISION,
    LANDAREA_MEDI DOUBLE PRECISION,
    LIVINGAPARTMENTS_MEDI DOUBLE PRECISION,
    LIVINGAREA_MEDI DOUBLE PRECISION,
    NONLIVINGAPARTMENTS_MEDI DOUBLE PRECISION,
    NONLIVINGAREA_MEDI DOUBLE PRECISION,
    FONDKAPREMONT_MODE TEXT,
    HOUSETYPE_MODE TEXT,
    TOTALAREA_MODE DOUBLE PRECISION,
    WALLSMATERIAL_MODE TEXT,
    EMERGENCYSTATE_MODE TEXT,
    OBS_30_CNT_SOCIAL_CIRCLE DOUBLE PRECISION,
    DEF_30_CNT_SOCIAL_CIRCLE DOUBLE PRECISION,
    OBS_60_CNT_SOCIAL_CIRCLE DOUBLE PRECISION,
    DEF_60_CNT_SOCIAL_CIRCLE DOUBLE PRECISION,
    DAYS_LAST_PHONE_CHANGE DOUBLE PRECISION,
    FLAG_DOCUMENT_2 BIGINT,
    FLAG_DOCUMENT_3 BIGINT,
    FLAG_DOCUMENT_4 BIGINT,
    FLAG_DOCUMENT_5 BIGINT,
    FLAG_DOCUMENT_6 BIGINT,
    FLAG_DOCUMENT_7 BIGINT,
    FLAG_DOCUMENT_8 BIGINT,
    FLAG_DOCUMENT_9 BIGINT,
    FLAG_DOCUMENT_10 BIGINT,
    FLAG_DOCUMENT_11 BIGINT,
    FLAG_DOCUMENT_12 BIGINT,
    FLAG_DOCUMENT_13 BIGINT,
    FLAG_DOCUMENT_14 BIGINT,
    FLAG_DOCUMENT_15 BIGINT,
    FLAG_DOCUMENT_16 BIGINT,
    FLAG_DOCUMENT_17 BIGINT,
    FLAG_DOCUMENT_18 BIGINT,
    FLAG_DOCUMENT_19 BIGINT,
    FLAG_DOCUMENT_20 BIGINT,
    FLAG_DOCUMENT_21 BIGINT,
    AMT_REQ_CREDIT_BUREAU_HOUR DOUBLE PRECISION,
    AMT_REQ_CREDIT_BUREAU_DAY DOUBLE PRECISION,
    AMT_REQ_CREDIT_BUREAU_WEEK DOUBLE PRECISION,
    AMT_REQ_CREDIT_BUREAU_MON DOUBLE PRECISION,
    AMT_REQ_CREDIT_BUREAU_QRT DOUBLE PRECISION,
    AMT_REQ_CREDIT_BUREAU_YEAR DOUBLE PRECISION
);

create table if not exists previous_application(
SK_ID_PREV bigint,
SK_ID_CURR bigint,
NAME_CONTRACT_TYPE text,
AMT_ANNUITY double precision,
AMT_APPLICATION double precision,
AMT_CREDIT double precision,
AMT_DOWN_PAYMENT double precision,
AMT_GOODS_PRICE double precision,
WEEKDAY_APPR_PROCESS_START text,
HOUR_APPR_PROCESS_START bigint,
FLAG_LAST_APPL_PER_CONTRACT text,
NFLAG_LAST_APPL_IN_DAY bigint,
RATE_DOWN_PAYMENT double precision,
RATE_INTEREST_PRIMARY double precision,
RATE_INTEREST_PRIVILEGED double precision,
NAME_CASH_LOAN_PURPOSE text,
NAME_CONTRACT_STATUS text,
DAYS_DECISION bigint,
NAME_PAYMENT_TYPE text,
CODE_REJECT_REASON text,
NAME_TYPE_SUITE text,
NAME_CLIENT_TYPE text,
NAME_GOODS_CATEGORY text,
NAME_PORTFOLIO text,
NAME_PRODUCT_TYPE text,
CHANNEL_TYPE text,
SELLERPLACE_AREA bigint,
NAME_SELLER_INDUSTRY text,
CNT_PAYMENT double precision,
NAME_YIELD_GROUP text,
PRODUCT_COMBINATION text,
DAYS_FIRST_DRAWING double precision,
DAYS_FIRST_DUE double precision,
DAYS_LAST_DUE_1ST_VERSION double precision,
DAYS_LAST_DUE double precision,
DAYS_TERMINATION double precision,
NFLAG_INSURED_ON_APPROVAL double precision,
);

alter table previous_application
add constraint fk_prev_app_data
foreign key (SK_ID_CURR) references application_data (SK_ID_CURR);
